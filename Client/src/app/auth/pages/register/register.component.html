<h3 class="text-center">Đăng ký tài khoản</h3>
<form [formGroup]="form" (submit)="onSubmit()">
  <div class="mb-3 mt-3">
    <label for="username" class="form-label">Username:</label>
    <input formControlName="userName" class="form-control" id="username">
    @if (hasDisplayError('userName') && form.controls.userName.hasError('required')) {
      <div class="text-danger">Please enter a username</div>
    }
  </div>
  <div class="mb-3">
    <label for="pwd" class="form-label">Password:</label>
    <input formControlName="password" type="password" class="form-control" id="pwd">
    @if (hasDisplayError('password')) {
      <div class="text-danger">
        @switch (form.controls.password.errors | firstKey) {
          @case ('required') {
            <div>Please enter your password</div>
          }
          @case ('pattern') {
            <div>Mật khẩu nên có ít nhất 1 kí tự đặc biệt</div>
          }
          @case ('minlength') {
            <div>Mật khẩu phải có ít nhất 6 kí tự</div>
          }
        }
      </div>
    }
  </div>
  <div class="mb-3">
    <label for="cpwd" class="form-label">Confirm Password:</label>
    <input formControlName="confirmPassword" type="password" class="form-control" id="cpwd">
    @if (hasDisplayError('confirmPassword') && form.controls.confirmPassword.hasError('passwordMismatch')) {
      <div class="text-danger">Mật khẩu xác nhận không khớp</div>
    }
  </div>
  <div class="mb-3">
    <label for="nn" class="form-label">Nickname:</label>
    <input formControlName="fullName" class="form-control" id="nn">
    @if (hasDisplayError('fullName') && form.controls.fullName.hasError('required')) {
      <div class="text-danger">Vui lòng điền tên đầy đủ</div>
    }
  </div>
  <div class="mb-3">
    <label for="mail" class="form-label">Email:</label>
    <input type="email" formControlName="email" class="form-control" id="mail">
    @if (hasDisplayError('email')) {
      @if (form.controls.email.hasError('required')) {
        <div class="text-danger">Vui lòng điền email</div>
      }
      @if (form.controls.email.hasError('email')) {
        <div class="text-danger">Email không hợp lệ</div>
      }
    }
  </div>
  <button [disabled]="isLoading" type="submit" class="btn btn-primary d-block w-100">
    @if (this.isLoading) {
      Chờ tí...
      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
    } @else {
      Submit
    }
  </button>
</form>
